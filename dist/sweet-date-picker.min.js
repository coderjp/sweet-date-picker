function SweetDatePicker(t,e){var n,i,o,a,r,u=this,s=!0;this.settings=r=this._merge(e||{},SweetDatePicker.defaults),r.allowInput&&SweetDatePicker.isTouch()&&(r.allowInput=!1),this.modal=null,this.parts=[],_sweetDatePickerBackdrop||(_sweetDatePickerBackdrop=document.createElement("div"),_sweetDatePickerBackdrop.className="mdp-backdrop",_sweetDatePickerBackdrop.onclick=function(){SweetDatePicker.close()}),Object.defineProperties(this,{date:{get:function(){return u._date},set:function(t){u._date=t,u.set()}}}),t.getAttribute("data-value")?this._date=moment(t.getAttribute("data-value"),this.settings.submitFormat):t.value.length>0&&(this._date=moment(t.value,this.settings.submitFormat)),this._date&&this._date.isValid()||(s=!1,this._date=moment()),this.settings.maxDate&&this.settings.maxDate<this._date&&(this._date=this.settings.maxDate),n=this.settings.format.split(" ");for(var c=0;c<n.length;c++)i=this.parsePart(n[c]),i.position=c,this.parts.push(i);this.nodes();for(var p=0;p<this.parts.length;p++)i=this.parts[p],i.value=Math.round(i.value.numeric/i.step)*i.step;this.input=t,this.submitInput=document.createElement("input"),this.submitInput.setAttribute("type","hidden"),this.input.parentNode.appendChild(this.submitInput),this.submitInput.setAttribute("name",this.input.getAttribute("name")),this.input.removeAttribute("name"),this.input.onclick=function(){u.showModal(),this.blur()},_sweetDatePickers.push(this),this.updateUI(),s&&this.updateInputs();for(var c=0;c<SweetDatePicker.events.length;c++)o=SweetDatePicker.events[c],a="on"+o.charAt(0).toUpperCase()+o.slice(1),this.settings[a]&&this.on(o,function(t){r[a](t)}.bind(this));return this}function sdp(t,e){return new SweetDatePicker(t,e)}var _sweetDatePickers=[],_sweetDatePickerBackdrop;SweetDatePicker.prototype.parsePart=function(t){var e,n=SweetDatePicker.lookup(t),i=this;if(!n)throw'Sweet Date Picker: Unsupported format "'+t+'"';var o={caption:null,captionFormat:null,numeric:!0,modifier:0,el:null,step:1,inputLength:null,format:t};return e=this._merge(n,o),e.method||(e.method=e.unit),e.step=i.settings.steps[e.format]||e.step,Object.defineProperty(e,"value",{get:function(){return{display:i._date.format(e.format),numeric:parseInt(i._date[e.method]()+e.modifier)}},set:function(t){var n;t-=e.modifier,n=moment(i._date)[e.method](t),i.settings.maxDate&&i.settings.maxDate<n||(i._date=n,i.updateUI())}}),e},SweetDatePicker.prototype.showModal=function(){var t=this.modal;document.querySelector("body").appendChild(t),document.querySelector("body").appendChild(_sweetDatePickerBackdrop),document.querySelector("html").className+=" mdp-freeze",document.ontouchmove=function(t){t.preventDefault()},this.fireEvent("opened"),setTimeout(function(){t.className+=" shown"},10)},SweetDatePicker.prototype.hideModal=function(){var t=this.modal;return!!t.parentNode&&(t.className=t.className.replace(/\bshown\b/,""),setTimeout(function(){return!!t.parentNode&&(t.parentNode.removeChild(t),document.querySelector("html").className=document.querySelector("html").className.replace(/\bmdp-freeze\b/,""),void(document.ontouchmove=function(t){return!0}))},200),void this.fireEvent("closed"))},SweetDatePicker.prototype.nodes=function(){var t=this.settings,e=this.parts,n=this._date,i=this,o=function(t){var e=t.split("."),n=document.createElement(e[0]);if(e.length>1)for(var i=1;i<e.length;i++)n.className+=" "+e[i];return n},a=function(){var t="div.mdp-modal";return SweetDatePicker.isTouch()&&(t+=".touch"),o(t)},r=function(){return o("div.mdp-container")},u=function(i,o){i.oninput=function(){t.tabFill&&this.value.length==o.inputLength&&o.position<e.length&&e[o.position+1].el.querySelector("input").focus(),this.value.length==o.inputLength&&(o.value=this.value),this.value.length>=o.inputLength&&this.blur()},i.onfocus=function(){this.select(),0==o.position&&(t.tabFill=!0),o.position==e.length-1&&(t.tabFill=!1)},i.onkeypress=function(t){t=t||window.event;var e,i,a,r=t.which||t.keyCode,u=String.fromCharCode(r);return"number"==typeof this.selectionStart&&0==this.selectionStart&&this.selectionEnd==this.value.length&&(this.value=""),e=this.value+u,isNaN(parseFloat(e))&&!isFinite(e)?(t.preventDefault&&t.preventDefault(),!1):e.length<o.inputLength||(e=parseInt(e)-o.modifier,i=moment(n)[o.method](e),a=i[o.method](),a==e||(t.preventDefault&&t.preventDefault(),!1))}},s=function(e){for(var n,i,a,r,s,c,p,d,h,l=o("div.mdp-date-segment-col"),m=l.appendChild(o("div.mdp-date-segment")),f=["button.up","input.metric","div.comment","button.down"],v=0;v<f.length;v++)m.appendChild(o(f[v]));return d=function(t,e){var n=setTimeout(function(){this.executed=!0,t()}.bind(this),e);this.cleared=!1,this.executed=!1,this.clear=function(){this.cleared=!0,clearTimeout(n)}},n=function(){e.value=e.value.numeric+e.step},i=function(){e.value=e.value.numeric-e.step},a=function(t){c.executed||(c.clear(),t()),clearInterval(p)},r=function(e){c=new d(function(){p=setInterval(function(){e()},t.holdInterval)},t.debounceWait)},s=function(t,e,n){for(var i=0;i<e.length;i++)t[e[i]]=function(t){n(t)}},h=SweetDatePicker.supportsTouch()?["ontouchstart","onmousedown"]:["onmousedown"],s(l.querySelector(".up"),h,function(t){t.preventDefault(),r(function(){n()})}),h=SweetDatePicker.supportsTouch()?["ontouchend","onmouseup"]:["onmouseup"],s(l.querySelector(".up"),h,function(){a(function(){n()})}),h=SweetDatePicker.supportsTouch()?["ontouchstart","onmousedown"]:["onmousedown"],s(l.querySelector(".down"),h,function(t){t.preventDefault(),r(function(){i()})}),h=SweetDatePicker.supportsTouch()?["ontouchend","onmouseup"]:["onmouseup"],s(l.querySelector(".down"),h,function(){a(function(){i()})}),t.allowInput&&e.numeric?u(l.querySelector("input"),e):l.querySelector("input").disabled=!0,l},c=function(){var e=o("div.mdp-actions"),n=o("div.mdp-btn-wrapper"),a=n.appendChild(o("button.mdp-clear")),r=o("div.mdp-btn-wrapper"),u=r.appendChild(o("button.mdp-set"));return a.innerText="Clear",u.innerText="Set",t.showClear&&(e.appendChild(n),a.onclick=function(){i.clear()}),e.appendChild(r),u.onclick=function(){i.set(),SweetDatePicker.close()},e},p=a(),d=r(),h=c();p.appendChild(d),p.appendChild(h);for(var l=0;l<this.parts.length;l++)this.parts[l].el=d.appendChild(s(this.parts[l]));return this.modal=p,this},SweetDatePicker.prototype.updateUI=function(){for(var t,e=0;e<this.parts.length;e++)t=this.parts[e],t.el.querySelector(".metric").value=t.value.display,t.captionFormat?t.el.querySelector(".comment").innerText=this.date.format(t.captionFormat):t.caption&&(t.el.querySelector(".comment").innerText=t.caption)},SweetDatePicker.prototype.days=function(){return this._date.daysInMonth()},SweetDatePicker.prototype.set=function(){var t=this._date.format(this.settings.submitFormat);this.fireEvent("set",{newValue:t}),this.updateUI(),this.updateInputs()},SweetDatePicker.prototype.updateInputs=function(){this.input.value=this._date.format(this.settings.displayFormat),this.submitInput.value=this._date.format(this.settings.submitFormat)},SweetDatePicker.prototype.clear=function(){this.input.value="",this.submitInput.value="",this.fireEvent("clear"),SweetDatePicker.close()},SweetDatePicker.prototype._merge=function(t,e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t},SweetDatePicker.prototype.fireEvent=function(t,e){var n;if(e=e||{},document.createEvent){n=document.createEvent("HTMLEvents"),n.initEvent(t,!0,!1),n.firedBy=this;for(dataKey in e)n[dataKey]=e[dataKey];this.input.dispatchEvent(n)}else if(document.createEventObject){n=document.createEventObject();for(dataKey in e)n[dataKey]=e[dataKey];this.input.fireEvent("on"+t,n)}},SweetDatePicker.prototype.on=function(t,e){window.addEventListener?this.input.addEventListener(t,e,!1):this.input.attachEvent("on"+t,e)},SweetDatePicker.close=function(){for(var t=0;t<_sweetDatePickers.length;t++)_sweetDatePickers[t].hideModal();setTimeout(function(){_sweetDatePickerBackdrop.parentNode&&_sweetDatePickerBackdrop.parentNode.removeChild(_sweetDatePickerBackdrop)},200)},SweetDatePicker.defaults={format:"D M YYYY",displayFormat:"dddd, MMMM Do YYYY",submitFormat:"YYYY-MM-DD",allowInput:!0,tabFill:!0,showClear:!0,steps:{},debounceWait:400,holdInterval:50},SweetDatePicker.lookup=function(t){var e={YYYY:{unit:"year",inputLength:4},YY:{unit:"year",inputLength:2},M:{unit:"month",captionFormat:"MMMM",inputLength:2,modifier:1},MM:{unit:"month",captionFormat:"MMMM",inputLength:2,modifier:1},MMM:{unit:"month",inputLength:3,numeric:!1,modifier:1},MMMM:{unit:"month",inputLength:8,numeric:!1,modifier:1},D:{unit:"day",captionFormat:"dddd",inputLength:2,method:"date"},DD:{unit:"day",captionFormat:"dddd",inputLength:2,method:"date"},DDD:{unit:"day",inputLength:3,numeric:!1,method:"date"},DDDD:{unit:"day",inputLength:9,numeric:!1,method:"date"},H:{unit:"hour",caption:"Hours",inputLength:2},HH:{unit:"hour",caption:"Hours",inputLength:2},h:{unit:"hour",caption:"Hours",inputLength:2},hh:{unit:"hour",caption:"Hours",inputLength:2},m:{unit:"minute",caption:"Minutes",inputLength:2},mm:{unit:"minute",caption:"Minutes",inputLength:2},s:{unit:"second",caption:"Seconds",inputLength:2},ss:{unit:"second",caption:"Seconds",inputLength:2}};return e[t]||null},SweetDatePicker.events=["set","closed","opened","clear"],SweetDatePicker.supportsTouch=function(){return"ontouchstart"in window},SweetDatePicker.isTouch=function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)},window.jQuery&&(jQuery.fn.sdp=function(t){for(var e=[],n=0;n<this.length;n++)e.push(sdp(this[n],t));return 1==e.length?e[0]:e});