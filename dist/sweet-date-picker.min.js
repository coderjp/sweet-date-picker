!function(t,e,n){"use strict";!function t(e,n,i){function a(u,s){if(!n[u]){if(!e[u]){var o="function"==typeof require&&require;if(!s&&o)return o(u,!0);if(r)return r(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[u]={exports:{}};e[u][0].call(d.exports,function(t){var n=e[u][1][t];return a(n?n:t)},d,d.exports,t,e,n,i)}return n[u].exports}for(var r="function"==typeof require&&require,u=0;u<i.length;u++)a(i[u]);return a}({1:[function(t,n,i){function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function(){function t(){a(this,t)}return r(t,null,[{key:"getElement",value:function(){return e.getElementsByClassName("sdp-backdrop")[0]||null}},{key:"show",value:function(){this.getElement()?this.getElement().classList.remove("hide"):this.render()}},{key:"hide",value:function(){this.getElement().classList.add("hide")}},{key:"render",value:function(){var t=e.createElement("div");t.className="sdp-backdrop",t.onclick=function(){return SweetDatePicker.hide()},e.querySelector("body").appendChild(t)}}]),t}();i.default=u,n.exports=i.default},{}],2:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i={format:"D M YYYY",displayFormat:"dddd, MMMM Do YYYY",submitFormat:"YYYY-MM-DD",allowInput:!0,tabFill:!0,showClear:!0,steps:{},debounceWait:4e3,holdInterval:50,defaultDate:moment()};n.default=i,e.exports=n.default},{}],3:[function(n,i,a){Object.defineProperty(a,"__esModule",{value:!0});var r=function(){return!!("ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch)},u=function(){return"ontouchstart"in t};a.isTouch=r,a.supportsTouch=u},{}],4:[function(t,e,i){function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=t("./render"),o=a(s),l=t("./push-hold-event"),d=a(l),h=function(){function t(e,n){r(this,t),this.picker=e,this.listeners=new Map;var i={YYYY:{unit:"year",inputLength:4},YY:{unit:"year",inputLength:2},M:{unit:"month",captionFormat:"MMMM",inputLength:2,modifier:1},MM:{unit:"month",captionFormat:"MMMM",inputLength:2,modifier:1},MMM:{unit:"month",inputLength:3,numeric:!1,modifier:1},MMMM:{unit:"month",inputLength:8,numeric:!1,modifier:1},D:{unit:"day",captionFormat:"dddd",inputLength:2,method:"date"},DD:{unit:"day",captionFormat:"dddd",inputLength:2,method:"date"},DDD:{unit:"day",inputLength:3,numeric:!1,method:"date"},DDDD:{unit:"day",inputLength:9,numeric:!1,method:"date"},H:{unit:"hour",caption:"Hours",inputLength:2},HH:{unit:"hour",caption:"Hours",inputLength:2},h:{unit:"hour",caption:"Hours",inputLength:2},hh:{unit:"hour",caption:"Hours",inputLength:2},m:{unit:"minute",caption:"Minutes",inputLength:2},mm:{unit:"minute",caption:"Minutes",inputLength:2},s:{unit:"second",caption:"Seconds",inputLength:2},ss:{unit:"second",caption:"Seconds",inputLength:2}},a={caption:null,captionFormat:null,numeric:!0,modifier:0,el:null,step:1,inputLength:null,format:n},u=i[n]||null;if(!u)throw'Sweet Date Picker: Unsupported format "'+n+'"';this.part=Object.assign({},a,u),this.elements={},this.part.method||(this.part.method=this.part.unit)}return u(t,[{key:"setPosition",value:function(t){this.position=t}},{key:"setSteps",value:function(t){this.part.step=t}},{key:"focus",value:function(){console.log("focus",this.elements.metric),this.elements.metric.focus()}},{key:"render",value:function(){var t=this,e=(0,o.default)("div.sdp-date-segment-col"),n=(0,o.default)("div.sdp-date-segment");return e.appendChild(n),this.elements={up:n.appendChild((0,o.default)("button.up")),metric:n.appendChild((0,o.default)("input.metric")),comment:n.appendChild((0,o.default)("div.comment")),down:n.appendChild((0,o.default)("button.down"))},new d.default(this.elements.up,function(){t.value=t.value.numeric+t.part.step},this.picker.settings.holdInterval,this.picker.settings.debounceWait),new d.default(this.elements.down,function(){t.value=t.value.numeric-t.part.step},this.picker.settings.holdInterval,this.picker.settings.debounceWait),this.picker.settings.allowInput&&this.part.numeric?(this.elements.metric.oninput=function(e){t.validate(e.target.value)||t.emit("validation-failed",e),t.emit("input",e)},this.elements.metric.onfocus=function(e){return t.emit("focus",e)},this.elements.metric.onkeypress=function(e){return t.emit("keypress",e)}):this.elements.metric.disabled=!0,this.bindEvents(),this.update(),e}},{key:"update",value:function(){this.elements.metric.value=this.value.display,this.part.captionFormat?this.elements.comment.innerText=this.picker._dateMoment.format(this.part.captionFormat):this.part.caption&&(this.elements.comment.innerText=this.part.caption)}},{key:"validate",value:function(t){if(t.length<this.part.inputLength)return!0;t=parseInt(t)-this.part.modifier;var e=moment(this.picker._dateMoment)[this.part.method](t);return e[this.part.method]()===t}},{key:"bindEvents",value:function(){var t=this,e=this.value.display;this.addListener("input",function(e){e.target.value.length>=t.part.inputLength&&(t.value=e.target.value,e.target.blur())}),this.addListener("focus",function(t){return t.target.select()}),this.addListener("keypress",function(t){var n=t.which||t.keyCode;return e=t.target.value,!(n>31&&(n<48||n>57))}),this.addListener("validation-failed",function(t){t.target.value=e,t.target.classList.add("error"),setTimeout(function(){return t.target.classList.remove("error")},1e3)})}},{key:"addListener",value:function(t,e){this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(e)}},{key:"emit",value:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];var r=this.listeners.get(t);return!(!r||!r.length)&&(r.forEach(function(t){t.apply(n,i)}),!0)}},{key:"value",get:function(){return{display:this.picker._dateMoment.format(this.part.format),numeric:parseInt(this.picker._dateMoment[this.part.method]()+this.part.modifier)}},set:function(t){t-=this.part.modifier;var e=moment(this.picker._dateMoment)[this.part.method](t);this.picker.settings.maxDate&&this.picker.settings.maxDate<e||(this.emit("update",e),this.update())}}]),t}();i.default=h,e.exports=i.default},{"./push-hold-event":5,"./render":6}],5:[function(t,e,i){function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("./helpers"),s=function(){function t(e,n,i,r){var s=this;a(this,t),this.target=e,this.callback=n,this.interval=i,this.debounce=r,this._executed=!1,this._intervalTimer=null,this._timer=null;var o=(0,u.supportsTouch)()?["ontouchstart","onmousedown"]:["onmousedown"];this._bindEvent(this.target,o,function(t){s._mouseDown(t)});var l=(0,u.supportsTouch)()?["ontouchend","onmouseup"]:["onmouseup"];this._bindEvent(this.target,l,function(t){s._mouseUp(t)})}return r(t,[{key:"_mouseDown",value:function(t){var e=this;t.preventDefault(),this._timer=setTimeout(function(){e._executed=!0,e._intervalTimer=setInterval(function(){e.callback()},e.interval)},this.debounce)}},{key:"_mouseUp",value:function(t){t.preventDefault(),this._clear(),this._executed||this.callback(),this._executed=!1}},{key:"_clear",value:function(){null!==this._timer&&(clearTimeout(this._timer),this._timer=null),null!==this._intervalTimer&&(clearTimeout(this._intervalTimer),this._intervalTimer=null)}},{key:"_bindEvent",value:function(t,e,i){var a=!0,r=!1,u=n;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var l=s.value;t[l]=function(t){i(t)}}}catch(t){r=!0,u=t}finally{try{!a&&o.return&&o.return()}finally{if(r)throw u}}}}]),t}();i.default=s,e.exports=i.default},{"./helpers":3}],6:[function(t,i,a){Object.defineProperty(a,"__esModule",{value:!0});var r=function(t){var i=t.split("."),a=i.shift(),r=e.createElement(a),u=!0,s=!1,o=n;try{for(var l,d=i[Symbol.iterator]();!(u=(l=d.next()).done);u=!0){var h=l.value;r.classList.add(h)}}catch(t){s=!0,o=t}finally{try{!u&&d.return&&d.return()}finally{if(s)throw o}}return r};a.default=r,i.exports=a.default},{}],7:[function(i,a,r){function u(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=i("./modules/defaults"),d=u(l),h=i("./modules/render"),c=u(h),p=i("./modules/backdrop"),f=u(p),m=i("./modules/part"),v=u(m),y=i("./modules/helpers"),g=[],b=function(){function t(e,n){var i=this;s(this,t),g.push(this),this.settings=Object.assign({},n,d.default),this.listeners=new Map,(0,y.isTouch)()&&(this.settings.allowInput=!1),this.parts=[],this.input=e,this.activePart=-1,this.initializeDate(),this.constrainMax(),this.initializeForm(),this.updateForm(),this.initialized=!1,this.input.onclick=function(t){i.show(),t.target.blur()}}return o(t,[{key:"getValue",value:function(){return this.input.getAttribute("data-value")?this.input.getAttribute("data-value"):this.input.value.length>0?this.value:void 0}},{key:"assign",value:function(t){t instanceof moment?this._dateMoment=t:this._dateMoment=moment(t,this.settings.submitFormat)}},{key:"initializeDate",value:function(){var t=this.getValue();console.log(t,this.settings.defaultDate,this.input.getAttribute("data-value")),this.assign(t||this.settings.defaultDate||this.input.getAttribute("data-value")),this._dateMoment&&this._dateMoment.isValid()||this.assign(this.settings.defaultDate)}},{key:"constrainMax",value:function(){this.settings.maxDate&&this.settings.maxDate<this._dateMoment&&(this._dateMoment=this.settings.maxDate)}},{key:"show",value:function(){this.initialized||this.initializeModal(),f.default.show(),this.modal.classList.remove("hide")}},{key:"initializeModal",value:function(){var t=this;this.buildModal();var e=this.settings.format.split(" "),i=!0,a=!1,r=n;try{for(var u,s=function(){var i=u.value,a=new v.default(t,i);t.parts.push(a);var r=t.parts.length-1;a.setPosition(r),t.settings.steps[i]&&a.setSteps(t.settings.steps[i]),a.addListener("input",function(n){t.settings.tabFill&&n.target.value.length==a.part.inputLength&&r<e.length&&t.nextPart()}),a.addListener("focus",function(){return t.activePart=r}),a.addListener("update",function(e){t._dateMoment=e;var i=!0,a=!1,r=n;try{for(var u,s=t.parts[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var o=u.value;o.update()}}catch(t){a=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}}),t.modal.querySelector(".sdp-container").appendChild(a.render())},o=e[Symbol.iterator]();!(i=(u=o.next()).done);i=!0)s()}catch(t){a=!0,r=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw r}}}},{key:"initializeForm",value:function(){this.submitInput=(0,c.default)("input"),this.submitInput.setAttribute("type","hidden"),this.submitInput.setAttribute("name",this.input.getAttribute("name")),this.input.parentNode.appendChild(this.submitInput),this.input.removeAttribute("name")}},{key:"nextPart",value:function(){var t=this.activePart+1;return!(t>=this.parts.length)&&void this.parts[t].focus()}},{key:"buildModal",value:function(){var t=this;this.modal=(0,c.default)("div.sdp-modal.hide"),(0,y.isTouch)()&&this.modal.classList.add("touch");var n=(0,c.default)("button.close");n.onclick=function(){return t.constructor.hide()},this.modal.appendChild(n);var i=(0,c.default)("div.sdp-container");this.modal.appendChild(i);var a=(0,c.default)("div.sdp-actions"),r=(0,c.default)("div.sdp-btn-wrapper"),u=(0,c.default)("button.sdp-clear"),s=(0,c.default)("div.sdp-btn-wrapper"),o=(0,c.default)("button.sdp-set");r.appendChild(u),s.appendChild(o),u.innerText="Clear",o.innerText="Set",this.settings.showClear&&(a.appendChild(r),u.onclick=function(){return t.clear()}),a.appendChild(s),o.onclick=function(){t.updateForm(),t.constructor.hide()},this.modal.appendChild(a),e.querySelector("body").appendChild(this.modal)}},{key:"updateForm",value:function(){this.input.value=this._dateMoment.format(this.settings.displayFormat),this.submitInput.value=this._dateMoment.format(this.settings.submitFormat)}},{key:"clear",value:function(){this.input.value="",this.submitInput.value="",this.constructor.hide()}},{key:"addListener",value:function(t,e){this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(e)}},{key:"emit",value:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];var r=this.listeners.get(t);return!(!r||!r.length)&&(r.forEach(function(t){t.apply(n,i)}),!0)}}],[{key:"hide",value:function(){var t=!0,e=!1,i=n;try{for(var a,r=g[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var u=a.value;u.modal.classList.add("hide")}}catch(t){e=!0,i=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw i}}f.default.hide()}}]),t}();r.default=b,"undefined"!=typeof t?t.SweetDatePicker=t.sdp=b:alert("Sweet Date Picker is a frontend module and requires the window var."),a.exports=r.default},{"./modules/backdrop":1,"./modules/defaults":2,"./modules/helpers":3,"./modules/part":4,"./modules/render":6}]},{},[7]),"function"==typeof define&&define.amd?define(function(){return SweetDatePicker}):"undefined"!=typeof module&&module.exports&&(module.exports=SweetDatePicker)}(window,document);