function SweetDatePicker(t,e){var i,n,r=this;this.settings=this._merge(e||{},SweetDatePicker.defaults),this.modal=null,this.parts=[],_sweetDatePickerBackdrop||(_sweetDatePickerBackdrop=document.createElement("div"),_sweetDatePickerBackdrop.className="mdp-backdrop",_sweetDatePickerBackdrop.onclick=function(){SweetDatePicker.close()}),Object.defineProperties(this,{date:{get:function(){return r._date},set:function(t){r._date=t,r.updateUI()}}}),this._date=t.getAttribute("data-value")?moment(t.getAttribute("data-value"),this.settings.submitFormat):moment(),i=this.settings.format.split(" ");for(var o=0;o<i.length;o++)n=this.parsePart(i[o]),n.position=o,this.parts.push(n);this.nodes();for(var a=0;a<this.parts.length;a++)n=this.parts[a],n.value=Math.round(n.value.numeric/n.step)*n.step;this.input=t,this.submitInput=document.createElement("input"),this.submitInput.setAttribute("type","hidden"),this.input.parentNode.appendChild(this.submitInput),this.submitInput.setAttribute("name",this.input.getAttribute("name")),this.input.removeAttribute("name"),this.input.onclick=function(){r.showModal()},this.input.value=this.date.format(this.settings.displayFormat),_sweetDatePickers.push(this),this.updateUI()}function sdp(t,e){return new SweetDatePicker(t,e)}var _sweetDatePickers=[],_sweetDatePickerBackdrop;SweetDatePicker.prototype.parsePart=function(t){var e,i=SweetDatePicker.lookup(t),n=this;if(!i)throw'Sweet Date Picker: Unsupported format "'+t+'"';var r={caption:null,captionFormat:null,numeric:!0,modifier:0,el:null,step:1,inputLength:null,format:t};return e=this._merge(i,r),e.method||(e.method=e.unit),e.step=n.settings.steps[e.format]||e.step,Object.defineProperty(e,"value",{get:function(){return{display:n._date.format(e.format),numeric:parseInt(n._date[e.method]()+e.modifier)}},set:function(t){t-=e.modifier,n.date=moment(n._date[e.method](t))}}),e},SweetDatePicker.prototype.showModal=function(){document.querySelector("body").appendChild(this.modal),document.querySelector("body").appendChild(_sweetDatePickerBackdrop)},SweetDatePicker.prototype.hideModal=function(){return!!this.modal.parentNode&&void this.modal.parentNode.removeChild(this.modal)},SweetDatePicker.prototype.nodes=function(){var t=this.settings,e=this.parts,i=this._date,n=this,r=function(t){var e=t.split("."),i=document.createElement(e[0]);if(e.length>1)for(var n=1;n<e.length;n++)i.classList.add(e[n]);return i},o=function(){return r("div.mdp-modal.shown")},a=function(){return r("div.mdp-container")},u=function(n,r){n.oninput=function(){t.tabFill&&this.value.length==r.inputLength&&r.position<e.length&&e[r.position+1].el.querySelector("input").focus(),this.value.length==r.inputLength&&(r.value=this.value),this.value.length>=r.inputLength&&this.blur()},n.onfocus=function(){this.select(),0==r.position&&(t.tabFill=!0),r.position==e.length-1&&(t.tabFill=!1)},n.onkeypress=function(t){t=t||window.event;var e,n,o,a=t.which||t.keyCode,u=String.fromCharCode(a);return"number"==typeof this.selectionStart&&0==this.selectionStart&&this.selectionEnd==this.value.length&&(this.value=""),e=this.value+u,e.length<r.length||(e=parseInt(e),n=moment(i)[r.method](e),o=n[r.method](),o==e||(t.preventDefault&&t.preventDefault(),!1))}},s=function(e){for(var i=r("div.mdp-date-segment-col"),n=i.appendChild(r("div.mdp-date-segment")),o=["button.up","input.metric","div.comment","button.down"],a=0;a<o.length;a++)n.appendChild(r(o[a]));return i.querySelector(".up").onclick=function(){e.value=e.value.numeric+e.step},i.querySelector(".down").onclick=function(){e.value=e.value.numeric-e.step},t.allowInput&&e.numeric?u(i.querySelector("input"),e):i.querySelector("input").disabled=!0,i},p=function(){var e=r("div.mdp-actions"),i=r("div.mdp-btn-wrapper"),o=i.appendChild(r("button.mdp-clear")),a=r("div.mdp-btn-wrapper"),u=a.appendChild(r("button.mdp-set"));return o.innerText="Clear",u.innerText="Set",t.showClear&&(e.appendChild(i),o.onclick=function(){n.clear()}),e.appendChild(a),u.onclick=function(){n.set()},e},d=o(),h=a(),c=p();d.appendChild(h),d.appendChild(c);for(var l=0;l<this.parts.length;l++)this.parts[l].el=h.appendChild(s(this.parts[l]));return this.modal=d,this},SweetDatePicker.prototype.updateUI=function(){for(var t,e=0;e<this.parts.length;e++)t=this.parts[e],t.el.querySelector(".metric").value=t.value.display,t.captionFormat?t.el.querySelector(".comment").innerText=this.date.format(t.captionFormat):t.caption&&(t.el.querySelector(".comment").innerText=t.caption)},SweetDatePicker.prototype.days=function(){return this._date.daysInMonth()},SweetDatePicker.prototype.set=function(){this.input.value=this._date.format(this.settings.displayFormat),this.submitInput.value=this._date.format(this.settings.submitFormat),SweetDatePicker.close()},SweetDatePicker.prototype.clear=function(){this.input.value="",this.submitInput.value="",SweetDatePicker.close()},SweetDatePicker.prototype._merge=function(t,e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i]);return t},SweetDatePicker.prototype.defineSetterGetter=function(t){var e={};e[t.unit]={get:function(){var e=this._date[t.method]()+t.modifier;return{display:this._date.format(t.format),numeric:parseInt(e)}},set:function(e){e-=t.modifier,this.date=moment(this._date[t.method](e))}},Object.defineProperties(this,e)},SweetDatePicker.close=function(){for(var t=0;t<_sweetDatePickers.length;t++)_sweetDatePickers[t].hideModal();_sweetDatePickerBackdrop.parentNode.removeChild(_sweetDatePickerBackdrop)},SweetDatePicker.defaults={format:"D M YYYY",displayFormat:"dddd, MMMM Do YYYY",submitFormat:"YYYY-MM-DD",allowInput:!0,tabFill:!0,showClear:!0,steps:{}},SweetDatePicker.lookup=function(t){var e={YYYY:{unit:"year",inputLength:4},YY:{unit:"year",inputLength:2},M:{unit:"month",captionFormat:"MMMM",inputLength:2,modifier:1},MM:{unit:"month",captionFormat:"MMMM",inputLength:2,modifier:1},MMM:{unit:"month",inputLength:3,numeric:!1,modifier:1},MMMM:{unit:"month",inputLength:8,numeric:!1,modifier:1},D:{unit:"day",captionFormat:"dddd",inputLength:2,method:"date"},DD:{unit:"day",captionFormat:"dddd",inputLength:2,method:"date"},DDD:{unit:"day",inputLength:3,numeric:!1,method:"date"},DDDD:{unit:"day",inputLength:9,numeric:!1,method:"date"},H:{unit:"hour",caption:"Hours",inputLength:2},HH:{unit:"hour",caption:"Hours",inputLength:2},h:{unit:"hour",caption:"Hours",inputLength:2},hh:{unit:"hour",caption:"Hours",inputLength:2},m:{unit:"minute",caption:"Minutes",inputLength:2},mm:{unit:"minute",caption:"Minutes",inputLength:2},s:{unit:"second",caption:"Seconds",inputLength:2},ss:{unit:"second",caption:"Seconds",inputLength:2}};return e[t]||null},window.jQuery&&(jQuery.fn.sdp=function(t){for(var e=[],i=0;i<this.length;i++)e.push(sdp(this[i],t));return 1==e.length?e[0]:e});