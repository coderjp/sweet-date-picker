function SweetDatePicker(t,e){var n,i,r,a,o,s=this;this.settings=o=this._merge(e||{},SweetDatePicker.defaults),this.modal=null,this.parts=[],_sweetDatePickerBackdrop||(_sweetDatePickerBackdrop=document.createElement("div"),_sweetDatePickerBackdrop.className="mdp-backdrop",_sweetDatePickerBackdrop.onclick=function(){SweetDatePicker.close()}),Object.defineProperties(this,{date:{get:function(){return s._date},set:function(t){s._date=t,s.updateUI(),s.updateInputs()}}}),this._date=t.getAttribute("data-value")?moment(t.getAttribute("data-value"),this.settings.submitFormat):moment(),n=this.settings.format.split(" ");for(var u=0;u<n.length;u++)i=this.parsePart(n[u]),i.position=u,this.parts.push(i);this.nodes();for(var p=0;p<this.parts.length;p++)i=this.parts[p],i.value=Math.round(i.value.numeric/i.step)*i.step;this.input=t,this.submitInput=document.createElement("input"),this.submitInput.setAttribute("type","hidden"),this.input.parentNode.appendChild(this.submitInput),this.submitInput.setAttribute("name",this.input.getAttribute("name")),this.input.removeAttribute("name"),this.input.onclick=function(){s.showModal()},this.input.value=this.date.format(this.settings.displayFormat),_sweetDatePickers.push(this),this.updateUI();for(var u=0;u<SweetDatePicker.events.length;u++)r=SweetDatePicker.events[u],a="on"+r.charAt(0).toUpperCase()+r.slice(1),this.settings[a]&&this.on(r,function(t){o[a](t)}.bind(this));return this}function sdp(t,e){return new SweetDatePicker(t,e)}var _sweetDatePickers=[],_sweetDatePickerBackdrop;SweetDatePicker.prototype.parsePart=function(t){var e,n=SweetDatePicker.lookup(t),i=this;if(!n)throw'Sweet Date Picker: Unsupported format "'+t+'"';var r={caption:null,captionFormat:null,numeric:!0,modifier:0,el:null,step:1,inputLength:null,format:t};return e=this._merge(n,r),e.method||(e.method=e.unit),e.step=i.settings.steps[e.format]||e.step,Object.defineProperty(e,"value",{get:function(){return{display:i._date.format(e.format),numeric:parseInt(i._date[e.method]()+e.modifier)}},set:function(t){t-=e.modifier,i._date=moment(i._date[e.method](t)),i.updateUI()}}),e},SweetDatePicker.prototype.showModal=function(){document.querySelector("body").appendChild(this.modal),document.querySelector("body").appendChild(_sweetDatePickerBackdrop),this.fireEvent("opened")},SweetDatePicker.prototype.hideModal=function(){return!!this.modal.parentNode&&(this.modal.parentNode.removeChild(this.modal),void this.fireEvent("closed"))},SweetDatePicker.prototype.nodes=function(){var t=this.settings,e=this.parts,n=this._date,i=this,r=function(t){var e=t.split("."),n=document.createElement(e[0]);if(e.length>1)for(var i=1;i<e.length;i++)n.classList.add(e[i]);return n},a=function(){return r("div.mdp-modal.shown")},o=function(){return r("div.mdp-container")},s=function(i,r){i.oninput=function(){t.tabFill&&this.value.length==r.inputLength&&r.position<e.length&&e[r.position+1].el.querySelector("input").focus(),this.value.length==r.inputLength&&(r.value=this.value),this.value.length>=r.inputLength&&this.blur()},i.onfocus=function(){this.select(),0==r.position&&(t.tabFill=!0),r.position==e.length-1&&(t.tabFill=!1)},i.onkeypress=function(t){t=t||window.event;var e,i,a,o=t.which||t.keyCode,s=String.fromCharCode(o);return"number"==typeof this.selectionStart&&0==this.selectionStart&&this.selectionEnd==this.value.length&&(this.value=""),e=this.value+s,e.length<r.length||(e=parseInt(e),i=moment(n)[r.method](e),a=i[r.method](),a==e||(t.preventDefault&&t.preventDefault(),!1))}},u=function(e){for(var n=r("div.mdp-date-segment-col"),i=n.appendChild(r("div.mdp-date-segment")),a=["button.up","input.metric","div.comment","button.down"],o=0;o<a.length;o++)i.appendChild(r(a[o]));return n.querySelector(".up").onclick=function(){e.value=e.value.numeric+e.step},n.querySelector(".down").onclick=function(){e.value=e.value.numeric-e.step},t.allowInput&&e.numeric?s(n.querySelector("input"),e):n.querySelector("input").disabled=!0,n},p=function(){var e=r("div.mdp-actions"),n=r("div.mdp-btn-wrapper"),a=n.appendChild(r("button.mdp-clear")),o=r("div.mdp-btn-wrapper"),s=o.appendChild(r("button.mdp-set"));return a.innerText="Clear",s.innerText="Set",t.showClear&&(e.appendChild(n),a.onclick=function(){i.clear()}),e.appendChild(o),s.onclick=function(){i.set()},e},d=a(),c=o(),h=p();d.appendChild(c),d.appendChild(h);for(var l=0;l<this.parts.length;l++)this.parts[l].el=c.appendChild(u(this.parts[l]));return this.modal=d,this},SweetDatePicker.prototype.updateUI=function(){for(var t,e=0;e<this.parts.length;e++)t=this.parts[e],t.el.querySelector(".metric").value=t.value.display,t.captionFormat?t.el.querySelector(".comment").innerText=this.date.format(t.captionFormat):t.caption&&(t.el.querySelector(".comment").innerText=t.caption)},SweetDatePicker.prototype.days=function(){return this._date.daysInMonth()},SweetDatePicker.prototype.set=function(){var t=this._date.format(this.settings.submitFormat);this.fireEvent("set",{newValue:t}),this.updateInputs(),SweetDatePicker.close()},SweetDatePicker.prototype.updateInputs=function(){this.input.value=this._date.format(this.settings.displayFormat),this.submitInput.value=date},SweetDatePicker.prototype.clear=function(){this.input.value="",this.submitInput.value="",this.fireEvent("clear"),SweetDatePicker.close()},SweetDatePicker.prototype._merge=function(t,e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t},SweetDatePicker.prototype.fireEvent=function(t,e){var n;if(e=e||{},document.createEvent){n=document.createEvent("HTMLEvents"),n.initEvent(t,!0,!1),n.firedBy=this;for(dataKey in e)n[dataKey]=e[dataKey];this.input.dispatchEvent(n)}else if(document.createEventObject){n=document.createEventObject();for(dataKey in e)n[dataKey]=e[dataKey];this.input.fireEvent("on"+t,n)}},SweetDatePicker.prototype.on=function(t,e){window.addEventListener?this.input.addEventListener(t,e,!1):this.input.attachEvent("on"+t,e)},SweetDatePicker.close=function(){for(var t=0;t<_sweetDatePickers.length;t++)_sweetDatePickers[t].hideModal();_sweetDatePickerBackdrop.parentNode.removeChild(_sweetDatePickerBackdrop)},SweetDatePicker.defaults={format:"D M YYYY",displayFormat:"dddd, MMMM Do YYYY",submitFormat:"YYYY-MM-DD",allowInput:!0,tabFill:!0,showClear:!0,steps:{}},SweetDatePicker.lookup=function(t){var e={YYYY:{unit:"year",inputLength:4},YY:{unit:"year",inputLength:2},M:{unit:"month",captionFormat:"MMMM",inputLength:2,modifier:1},MM:{unit:"month",captionFormat:"MMMM",inputLength:2,modifier:1},MMM:{unit:"month",inputLength:3,numeric:!1,modifier:1},MMMM:{unit:"month",inputLength:8,numeric:!1,modifier:1},D:{unit:"day",captionFormat:"dddd",inputLength:2,method:"date"},DD:{unit:"day",captionFormat:"dddd",inputLength:2,method:"date"},DDD:{unit:"day",inputLength:3,numeric:!1,method:"date"},DDDD:{unit:"day",inputLength:9,numeric:!1,method:"date"},H:{unit:"hour",caption:"Hours",inputLength:2},HH:{unit:"hour",caption:"Hours",inputLength:2},h:{unit:"hour",caption:"Hours",inputLength:2},hh:{unit:"hour",caption:"Hours",inputLength:2},m:{unit:"minute",caption:"Minutes",inputLength:2},mm:{unit:"minute",caption:"Minutes",inputLength:2},s:{unit:"second",caption:"Seconds",inputLength:2},ss:{unit:"second",caption:"Seconds",inputLength:2}};return e[t]||null},SweetDatePicker.events=["set","closed","opened","clear"],window.jQuery&&(jQuery.fn.sdp=function(t){for(var e=[],n=0;n<this.length;n++)e.push(sdp(this[n],t));return 1==e.length?e[0]:e});